<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Content Manager</title>
</head>
<body>
  <!-- Elemento raíz para Decap CMS -->
  <div id="cms-root"></div>
  
  <!-- Cargar Decap CMS primero -->
  <script src="https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js"></script>
  
  <!-- Luego cargar Decap Bridge -->
  <script src="https://decapbridge.com/decap-bridge.js"></script>
  
  <!-- Inicialización -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Esperar a que ambos scripts estén cargados
      if (typeof CMS !== 'undefined' && typeof DecapBridge !== 'undefined') {
        DecapBridge.init({
          config: {
            backend: {
              name: 'git-gateway',
              repo: 'liammenu/Liammenu',
              branch: 'main',
              identity_url: 'https://auth.decapbridge.com/sites/f73a5bd9-5d5a-456d-88ce-5fc9e282b117',
              gateway_url: 'https://gateway.decapbridge.com'
            },
            media_folder: 'images',
            public_folder: '/images',
            site_url: 'https://liammenu.github.io',
            logo_url: 'https://decapbridge.com/decapcms-with-bridge.svg',
            collections: [
              {
                name: 'productos',
                label: 'Productos',
                files: [
                  {
                    label: 'Lista de Productos',
                    name: 'productos',
                    file: 'data/productos.yml',
                    fields: [
                      {
                        label: 'Productos',
                        name: 'productos',
                        widget: 'list',
                        fields: [
                          { label: 'Nombre', name: 'nombre', widget: 'string' },
                          { label: 'Precio', name: 'precio', widget: 'number' },
                          { label: 'Descripción', name: 'descripcion', widget: 'text' },
                          { label: 'Imagen', name: 'imagen', widget: 'image', required: false }
                        ]
                      }
                    ]
                  }
                ]
              }
            ]
          }
        });
      } else {
        console.error('Decap CMS o DecapBridge no se cargaron correctamente');
      }
    });
  </script>
</body>
</html>